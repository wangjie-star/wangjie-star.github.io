[{"title":"CentOS-7设置静态IP","url":"/post/undefined.html","content":"**vim /etc/sysconfig/network-scripts/ifcfg-ens33**\n\n```cpp\nTYPE=Ethernet\nPROXY_METHOD=none\nBROWSER_ONLY=no\nBOOTPROTO=static\nDEFROUTE=yes\nIPV4_FAILURE_FATAL=no\nIPV6INIT=yes\nIPV6_AUTOCONF=yes\nIPV6_DEFROUTE=yes\nIPV6_FAILURE_FATAL=no\nIPV6_ADDR_GEN_MODE=stable-privacy\nNAME=ens33\nDEVICE=ens33\nONBOOT=yes\nIPADDR=192.168.1.128\nNETMASK=255.255.255.0\nGATEWAY=192.168.1.2\nDNS1=192.168.1.2\n\n\n\n\n```\n\nservice network restart\n\n设置静态IP脚本:setIP.sh\n\n它的参数就是要设置的IP,如./setIP.sh 192.168.1.1\n\n```\n#!/bin/sh\n\nFILE=\"/etc/sysconfig/network-scripts/ifcfg-ens33\"\nTEXT=\"TYPE=Ethernet\\n\\\nPROXY_METHOD=none\\n\\\nBROWSER_ONLY=no\\n\\\nBOOTPROTO=static\\n\\\nDEFROUTE=yes\\n\\\nIPV4_FAILURE_FATAL=no\\n\\\nIPV6INIT=yes\\n\\\nIPV6_AUTOCONF=yes\\n\\\nIPV6_DEFROUTE=yes\\n\\\nIPV6_FAILURE_FATAL=no\\n\\\nIPV6_ADDR_GEN_MODE=stable-privacy\\n\\\nNAME=ens33\\n\\\nDEVICE=ens33\\n\\\nONBOOT=yes\\n\\\nIPADDR=192.168.119.150\\n\\\nNETMASK=255.255.255.0\\n\\\nGATEWAY=192.168.119.2\\n\\\nDNS1=192.168.119.2\"\n\nIPADDR=\"IPPADDR=$1\"\n\n\nIPADDR=$1\n_ckIPaddr () {\n        ckStep1=`echo $1 | awk -F\".\" '{print NF}'`\n        if [ $ckStep1 -eq 4 ] || [ $ckStep1 -eq 6 ]\n        then\n                ckStep2=`echo $1 | awk -F\".\" '{if ($1!=0 && $NF!=0) split ($0,IPNUM,\".\")} END \\\n        { for (k in IPNUM) if (IPNUM[k]==0) print IPNUM[k]; else if (IPNUM[k]!=0 && IPNUM[k]!~/[a-z|A-Z]/ && length(IPNUM[k])<=3 &&\nIPNUM[k]<255 && IPNUM[k]!~/^0/) print IPNUM[k]}'| wc -l`\n                if [ $ckStep2 -eq $ckStep1 ]\n                then\n                        echo 0\n                else\n                        echo 1\n                fi\n        else\n                echo 1\n        fi\n}\n \nCK_IPADDR=`_ckIPaddr $IPADDR`\n\nif [ $CK_IPADDR -eq 1 ]\nthen\n\n     echo \"The string $IPADDR is not a correct ipaddr!!!\"\n     exit 1\nfi\n\necho \"\"  > $FILE\n\n\necho -e $TEXT > $FILE\n\nIPADDRSTR=\"IPADDR=\"$IPADDR\necho -e $IPADDRSTR >> $FILE\n\necho \"NETMASK=255.255.255.0\" >> $FILE\n\nGATEWAY=\"GATEWAY=\"\nDNS1=\"DNS1=\"\n\nsum=0\nIPADDR=${IPADDR//./ }    \nfor element in $IPADDR\ndo\n    let \"sum++\"\n    if [ $sum -ge 4 ];then\n        break\n    fi\n\n    GATEWAY=$GATEWAY$element\".\"\n    DNS1=$DNS1$element\".\"    \ndone\n\nGATEWAY=$GATEWAY\"2\"\nDNS1=$DNS1\"2\"\n\necho -e $GATEWAY >> $FILE\necho -e $DNS1 >> $FILE\n\nservice network restart\n\n\n\n```\n","tags":["CentOS-7"]},{"title":"CentOS-7设置Samba共享目录","url":"/post/undefined.html","content":"**1、安装Samba服务**\n\n```cpp\n#下载安装Samba\nyum -y install samba\n# 查看yum源中Samba版本\nyum list | grep samba\n# 查看samba的安装情况\nrpm -qa | grep samba\n```\n\n**2\\. 启动Samba服务**\n\nSamba服务安装完成之后有两种方法启动:\n\n```cpp\nservice smb start\n# 或者\nsystemctl start smb.service\n```\n\n设置smb服务开机启动\n\n```cpp\nsystemctl enable smb.service\n```\n\n**3\\. 关闭防火墙**\n\n```cpp\n#执行关闭命令：\nsystemctl stop firewalld.service\n\n#执行开机禁用防火墙自启命令：\nsystemctl disable firewalld.service\n```\n\n**4.修改Samba配置**\n\n```cpp\n/*** vim /etc/samba/smb.conf\n *** 其中[CentOS]下的path要修改为共享的目录 ***/\n[global]\nworkgroup = MYGROUP\nserver string = Samba Server Version %v\nlog file = /var/log/samba/log.%m\nmax log size = 50\nsecurity = user\npassdb backend = tdbsam\nload printers = yes\ncups options = raw\n\n[printers]\ncomment = All Printers\npath = /var/spool/samba\nbrowseable = no\nguest ok = no\nwritable = no\nprintable = yes\n\n[CentOS]\ncomment = myshare\nbrowseable = yes\npath = /home/share\nwritable = yes\n```\n\n**5.将访问的账户添加到samba的账户中**\n\nsmbpasswd 参数: -a: 添加 -x: 删除 -d: 禁用 -e: 启用\n\nsmbpasswd -a 系统用户名\n\n**6.确保 setlinux 关闭 **\n\n默认 SELinux 禁止网络上对 Samba 服务器上的共享目录进行写操作\n\n```\n setenforce 0\n```\n\n**7.重启samba服务**\n\n```\nservice smb restart\n```\n","tags":["CentOS-7"]}]